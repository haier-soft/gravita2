let paddingVal=window.innerWidth-document.documentElement.clientWidth;function setVh(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}setVh();const searchForm=document.querySelector(".search__form");function searchFormPos(){window.innerWidth>767&&(searchForm.style.width="auto",searchForm.style.right=document.documentElement.clientWidth-document.querySelector(".header__right .search-btn").getBoundingClientRect().right+"px")}function resetBtnVisible(){const e=document.querySelector(".f-search__reset");e.style.visibility="visible",e.style.pointerEvents="auto"}function resetBtnHidden(){const e=document.querySelector(".f-search__reset");e.style.visibility="hidden",e.style.pointerEvents="none"}window.addEventListener("resize",(function(){paddingVal=window.innerWidth-document.documentElement.clientWidth,setVh(),searchForm.style.right=document.documentElement.clientWidth-document.querySelector(".header__right .search-btn").getBoundingClientRect().right+"px"})),window.addEventListener("orientationchange",(function(){paddingVal=window.innerWidth-document.documentElement.clientWidth,setVh(),searchForm.style.right=document.documentElement.clientWidth-document.querySelector(".header__right .search-btn").getBoundingClientRect().right+"px"})),$((function(){var e=screen.width,t=window.innerWidth;let o=0;const i=$(".header"),s=()=>window.pageYOffset||document.documentElement.scrollTop,n=()=>i.hasClass("hide");$(window).on("scroll",(function(){s()>o&&!n()&&s()>200?i.addClass("hide"):s()<o&&n()&&i.removeClass("hide"),o=s()})),e>991?($(".location__link").on("click",(function(e){e.preventDefault(),$(".location__dropdown").slideToggle()})),$(".location__confirm").on("click",(function(e){e.preventDefault(),$(".location__dropdown").slideUp()}))):($(".location__link").on("click",(function(e){e.preventDefault();let t=$(this).parents(".location");t.find(".location__dropdown").fadeIn(),$("body").addClass("noscroll"),$("body").css("padding-right",paddingVal+"px"),$("header").css("padding-right",paddingVal+"px"),t.find(".overlay").length<=0&&t.append('<div class="overlay"></div>')})),$(".location__confirm").on("click",(function(e){e.preventDefault();let t=$(this).parents(".location");t.find(".location__dropdown").fadeOut(),$("body").removeClass("noscroll"),$("body").css("padding-right","0"),$("header").css("padding-right","0"),t.find(".overlay").remove()})),$(".location").on("click",".overlay",(function(){$(this).siblings(".location__dropdown").fadeOut(),$("body").removeClass("noscroll"),$("body").css("padding-right","0"),$("header").css("padding-right","0"),$(this).remove()}))),$(".location__btn").on("click",(function(){$(this).parents(".location__dropdown").slideUp(),$(this).parents(".location").find(".overlay").remove()})),$(".menu-toggle").on("click",(function(){$(".search").slideUp(),$(this).toggleClass("open"),$(".dropdown").slideToggle(),$("body").hasClass("noscroll")?setTimeout((()=>{$("body").css("padding-right",0),$("header").css("padding-right",0),$("body").removeClass("noscroll")}),400):($("body").css("padding-right",paddingVal+"px"),$("header").css("padding-right",paddingVal+"px"),$("body").addClass("noscroll"));let e=$(".location");e.find(".location__dropdown").fadeOut(),e.find(".overlay").remove()})),$(".menu__link").on("click",(function(){$(".search").slideUp(),$(".dropdown").slideUp(),$("body").removeClass("noscroll"),$("body").css("padding-right","0"),$("header").css("padding-right","0"),$(".menu-toggle").removeClass("open")}));Plyr.setup(".js-player");$(".js-minus").on("click",(function(){let e=$(this).parent().find("input"),t=parseInt(e.val())-1;return t=t<1?1:t,e.val(t),e.change(),!1})),$(".js-plus").on("click",(function(){let e=$(this).parent().find("input");return e.val(parseInt(e.val())+1),e.change(),!1})),$(".search-btn").on("click",(function(e){e.preventDefault(),$("body").hasClass("noscroll")||($("body").css("padding-right",paddingVal+"px"),$("header").css("padding-right",paddingVal+"px"),$("body").addClass("noscroll")),window.innerWidth>767?($(".dropdown").slideUp(),$(".menu-toggle").hide().removeClass("open"),$(".search-close").show(),$(".search").slideDown().find("input").focus(),$(".search").append('<div class="search__overlay"></div>'),searchForm.style.width="auto",searchForm.style.right=document.documentElement.clientWidth-document.querySelector(".header__right .search-btn").getBoundingClientRect().right+"px"):($(".menu-toggle").hide(),$(".search-close").show(),$(".search").slideDown().find("input").focus()),$(".search-close").addClass("open")})),$(".search-close").on("click",(function(){const e=$(this);e.removeClass("open"),$(".search").slideUp(),$(".menu-toggle").hasClass("open")||setTimeout((()=>{$("body").css("padding-right","0"),$("header").css("padding-right","0"),$("body").removeClass("noscroll")}),400),setTimeout((function(){e.hide(),$(".menu-toggle").show()}),400)})),$(".search").on("click",".search__overlay",(function(){$(".search-close").removeClass("open"),$(".search").slideUp(),setTimeout((function(){$(".search-close").hide(),$(".menu-toggle").show(),$(".search__overlay").remove(),$("body").css("padding-right","0"),$("header").css("padding-right","0"),$("body").removeClass("noscroll")}),400)})),$(".js-modal-show").on("click",(function(){var e=$(this).attr("href");$(e).fadeIn(500),$("body").addClass("noscroll"),$("body").css("padding-right",paddingVal+"px"),$("header").css("padding-right",paddingVal+"px")})),$(".js-modal-close").on("click",(function(e){e.preventDefault(),$(".js-modal").fadeOut(100),setTimeout((()=>{$("body").removeClass("noscroll"),$("body").css("padding-right","0"),$("header").css("padding-right","0")}),100)})),$("body").on("click",".js-modal",(function(e){e.target.classList.contains("js-modal")&&($(".js-modal").fadeOut(100),setTimeout((()=>{$("body").removeClass("noscroll"),$("body").css("padding-right","0"),$("header").css("padding-right","0")}),100)),e.stopPropagation()})),$(".callback-btn").on("click",(function(){$(this).parents(".dropdown").slideUp(),$(".menu-toggle").removeClass("open")})),$(".phone").mask("+7 (999) 999-99-99",{completed:function(){$(this).addClass("completed")}}),$(".accordion__header").on("click",(function(){$(this).toggleClass("open").siblings(".accordion__content").slideToggle().parents(".accordion__item").siblings(".accordion__item").find(".accordion__header").removeClass("open").siblings(".accordion__content").slideUp()})),$(".scrollup").click((function(){return $("html, body").animate({scrollTop:0},600),!1})),$(".tooltip__icon").on("click",(function(e){$(this).siblings(".tooltip__popup").fadeToggle(),t-$(this).siblings(".tooltip__popup").offset().left-260<150&&$(this).siblings(".tooltip__popup").css({left:"auto",right:0}),e.stopPropagation()})),$("body").on("click",(()=>{$(".tooltip__popup").fadeOut()})),$(".f-search__show").on("click",(function(e){e.preventDefault(),$(".f-search__form").fadeIn().find("input").focus()})),$(".sort__toggle").on("click",(function(){$(this).toggleClass("open").siblings(".sort__dropdown").slideToggle()})),$(".sort__link").on("click",(function(e){e.preventDefault();let t=$(this).text();$(this).parents(".sort__dropdown").slideUp().siblings(".sort__toggle").removeClass("open").find(".sort__selected").text(t)})),$(".f-select__header").on("click",(function(){$(this).parents(".f-select").siblings(".f-select").find(".f-select__header").removeClass("open").siblings(".f-select__list").slideUp(),$(this).toggleClass("open").siblings(".f-select__list").slideToggle()})),$(".f-select__toggle").on("click",(function(){$(this).hasClass("open")?($(this).removeClass("open").find("span").text("Показать все"),$(this).siblings(".f-select__wrap").find(".f-select__checkbox:not(.hit)").hide(),$(this).siblings(".f-select__title").text("Популярные:")):($(this).addClass("open").find("span").text("Скрыть все"),$(this).siblings(".f-select__wrap").find(".f-select__checkbox").show(),$(this).siblings(".f-select__title").text("Все коллекции:"))})),$("body").on("mousedown",(function(e){e.target.classList.contains("f-select")||e.target.closest(".f-select")||$(".f-select__list").slideUp(),e.stopPropagation()})),$(".filter__toggle").on("click",(function(){window.innerWidth>767?$(this).hasClass("open")?($(this).removeClass("open").find("span").text("Показать все фильтры"),$(".f-select:nth-child(n + 5)").slideUp(),$(".f-select__header").removeClass("open").siblings(".f-select__list").slideUp()):($(this).addClass("open").find("span").text("Скрыть все фильтры"),$(".f-select:nth-child(n + 5)").slideDown()):$(this).hasClass("open")?($(this).removeClass("open").find("span").text("Показать все фильтры"),$(".filter__selects").slideUp(),$(".f-select__header").removeClass("open").siblings(".f-select__list").slideUp()):($(this).addClass("open").find("span").text("Скрыть все фильтры"),$(".filter__selects").slideDown())}));const l=$(".collections");function d(){$(window).on("scroll",(function(){const e=l.find(".colls-item");if(window.innerWidth<=991){let t=$(window).scrollTop();e.each((function(){let e=$(this),o=e.offset().top,i=e.offset().top+e.height()-40,s=e.find(".colls-item__title").height();t>o&&t<i?(e.find(".colls-item__title").removeClass("absolute").addClass("fixed").css("width",$(this).width()-20+"px"),e.css("padding-top",s+"px")):t<o?(e.find(".colls-item__title").removeClass("fixed"),e.css("padding-top","0px")):t>i&&e.find(".colls-item__title").removeClass("fixed").addClass("absolute")}))}else e.each((function(){$(this).find(".colls-item__title").removeClass("absolute").removeClass("fixed")}))}))}d(),$(window).on("resize",(()=>d()));let a=$(".product");a.length>0&&$(window).on("scroll",(function(){let e=$(window).scrollTop();if(window.innerWidth>991){let t=a.offset().top,o=t+a.find(".product__row").height()-a.find(".product__wrap").height();e>t&&e<o&&!a.hasClass("fixed")?a.addClass("fixed").removeClass("absolute"):e<t?a.removeClass("fixed"):e>o&&!a.hasClass("absolute")&&a.removeClass("fixed").addClass("absolute")}else{let t=230;window.innerWidth<576&&(t=180),e>a.offset().top+a.find(".product__left").height()-$(window).height()+t?$(".product__right").addClass("static"):$(".product__right").removeClass("static")}})),$(".js-product-anchor").on("click",(function(e){e.preventDefault();let t=$(".product__collection"),o=$(t).position().top,i=a.offset().top+a.find(".product__left").height()+o;return $("html,body").animate({scrollTop:i},600),!1})),$(".product-info__more").on("click",(function(e){e.preventDefault(),$(this).siblings(".product-info__list").toggleClass("open"),$(this).hasClass("open")?$(this).removeClass("open").find("span").text("Развернуть"):$(this).addClass("open").find("span").text("Свернуть")})),$(".js-copy-product-code").on("click",(function(e){e.preventDefault();let t=$("<input>");$("body").append(t),t.val($(".product__code span").text()).select(),document.execCommand("copy"),t.remove(),$(".js-copy-label").addClass("open"),setTimeout((function(){$(".js-copy-label").removeClass("open")}),3500)})),$(".js-copy-product-link").on("click",(function(e){e.preventDefault();let t=$("<input>");$("body").append(t),t.val(window.location.href).select(),document.execCommand("copy"),t.remove(),$(".js-copy-label-light").addClass("open"),setTimeout((function(){$(".js-copy-label-light").removeClass("open")}),3500)}));let c=$(".goods");if(c.length>0){let t=$(".goods-nav");e>767?$(window).on("scroll",(function(){let e=$(window).scrollTop(),o=c.offset().top-84,i=c.offset().top+c.height()-t.height()-84;e>o&&e<i?t.addClass("fixed"):t.removeClass("fixed"),$(".goods-nav__link").each((function(){let t=$(this.hash).offset().top-94;t<=e&&e<t+$(this.hash).height()?$(this).addClass("active"):$(this).removeClass("active")}))})):($(".goods-nav__link").removeClass("js-anchor"),$(".goods-nav__link").on("click",(function(e){e.preventDefault(),$(this).addClass("active").siblings(".goods-nav__link").removeClass("active"),$(this.hash).fadeIn().addClass("active").siblings(".coll-goods").hide().removeClass("active"),$(".coll-goods").masonry({gutter:h,itemSelector:".coll-goods__item",lazyLoad:!0})})))}let r=0,h=0,p=0,g=0;t>1859?(r=144,h=144,p=352,g=392):t<1860&&t>1599?(r=122,h=122,p=288,g=328):t<1600&&t>1279?(r=101,h=101,p=224,g=264):t<1280&&t>991?(r=133,h=60,p=224,g=133):t<992&&t>767?(r=20,h=20,p=216):t<768&&t>575?(r=86,h=86):t<576&&(r=10,h=10,p=".catalog-grid__item"),$(window).on("resize",(function(){(t=window.innerWidth)>1859?(r=144,h=144,p=352,g=392):t<1860&&t>1599?(r=122,h=122,p=288,g=328):t<1600&&t>1279?(r=101,h=101,p=224,g=264):t<1280&&t>991?(r=133,h=60,p=224,g=133):t<992&&t>767?(r=20,h=20,p=216):t<768&&t>575?(r=86,h=86):t<576&&(r=10,h=10,p=".catalog-grid__item"),$cataloGrid=$(".catalog-grid"),$cataloGrid.imagesLoaded((function(){$cataloGrid.masonry({horizontalOrder:!0,gutter:r,itemSelector:".catalog-grid__item",columnWidth:".catalog-grid__item",fitWidth:!0,lazyLoad:!0})})),$coolGoods=$(".coll-goods"),$coolGoods.imagesLoaded((function(){$coolGoods.masonry({horizontalOrder:!0,gutter:h,itemSelector:".coll-goods__item",columnWidth:".coll-goods__item",fitWidth:!0,lazyLoad:!0})})),$cardItems=$(".card-items"),$cardItems.imagesLoaded((function(){$cardItems.masonry({horizontalOrder:!0,gutter:g,itemSelector:".card-item",columnWidth:".card-item",fitWidth:!0,lazyLoad:!0})}))})),$cataloGrid=$(".catalog-grid"),$cataloGrid.imagesLoaded((function(){$cataloGrid.masonry({horizontalOrder:!0,gutter:r,itemSelector:".catalog-grid__item",columnWidth:".catalog-grid__item",fitWidth:!0,lazyLoad:!0})})),$coolGoods=$(".coll-goods"),$coolGoods.imagesLoaded((function(){$coolGoods.masonry({horizontalOrder:!0,gutter:h,itemSelector:".coll-goods__item",columnWidth:".coll-goods__item",fitWidth:!0,lazyLoad:!0})})),$cardItems=$(".card-items"),$cardItems.imagesLoaded((function(){$cardItems.masonry({horizontalOrder:!0,gutter:g,itemSelector:".card-item",columnWidth:".card-item",fitWidth:!0,lazyLoad:!0})}));const u=$(".js-range-price"),f=$(".js-input-from"),m=$(".js-input-to");if(m.val()>0)var _=m.val();else _=m.attr("max");if(f.val()>0)var v=f.val();else v=f.attr("min");var y=f.attr("id"),b=m.attr("id");let w,C=Number(f.attr("min")),k=Number(m.attr("max")),x=0,W=0;function j(e){x=Number(e.from),W=Number(e.to),f.prop("value",x),m.prop("value",W)}u.ionRangeSlider({grid:!1,type:"double",min:C,max:k,from:v,to:_,prettify_enabled:!0,onStart:j,onChange:j,onFinish:function(e){smartFilter.keyup(BX(y)),smartFilter.keyup(BX(b))}}),w=u.data("ionRangeSlider"),f.on("input",(function(){var e=Number($(this).prop("value"));e<C?e=C:e>W&&(e=W),w.update({from:e})})),m.on("input",(function(){var e=Number($(this).prop("value"));e<x?e=x:e>k&&(e=k),w.update({to:e})}))}));